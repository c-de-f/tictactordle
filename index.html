<!DOCTYPE>
<html>
    <head>
        <meta charset="UTF-16">
        <style>
    .button.built {
        top: 0%; 
        position: fixed;
        border-radius: 10px;
        width: 100px;
        height: 100px;
        z-index: 2;
    }
    .button.built:disabled,button:disabled,
button[disabled] {
        color: #000000;
    }
    .cellcnt
    {
     position: fixed;
        width: 100px;
        height: 100px;   
        
    }
    .letter
    {
        position: relative;
        width: 20px;
        height: 20px;
        top:0;
        left:0;
        z-index:50;
        font-size:20px;
        text-align: center;
    }

    .guesser
    {
        position: relative;
        width: 20px;
        height: 20px;
        top:40;
        left:0;
        z-index:50;
        font-size:20px;
        text-align: center;
        margin:auto;
    }
    .xo
    {
        position: relative;
        width: 50px;
        height: 50px;
        bottom:30;
        left:50;
        z-index:50;
        font-size:40px;
        text-align: center;
        color: #2a48c9;
        font-family: sans-serif;
    }

    .result
    {
        z-index:100;
        width:500px;
        height:500px;
        background-color: #ffffff;
        margin:auto;
        position:relative;
        border: 1px solid;
        border-radius: 5px;
        word-wrap: break-word;
        white-space:pre-wrap;
        padding:10px;
    }

    input[type="text"]
    {
        top: 40px; 
        left:40px;
        position: relative;
        width: 20px;
        z-index: 20;
    }
    </style>
    </head>
    <body onload="printBtn();"></body>
    <script>
            let letters_alphabet='abcdefghijklmnopqrstuvwxyz'.split('');
            let init_wordlist=['merit','baton','pants','reach','mocha','bully','puppy','front','piano','fleck','olive','lever','scout','tuple','veldt','salad','kiosk','bough','slope','caddy','salon','hedge','blame','hound','skirt','fudge','bugle','bower','flour','jelly','croup','latte','pinto','stove','quota','clone','demon','patty','snarl','group','owner','lathe','ready','ocean','angel','drill','crest','noose','siege','arrow','strap','filly','sight','edger','fetus','bingo','voice','trust','shame','dairy','rider','award','rerun','potty','pussy','shack','scarf','track','roast','model','bogus','ghost','torch','clave','thigh','alias','shine','porth','river','cello','union','guide','rayon','foray','pilaf','trend','rhyme','liner','kendo','night','filth','scrip','magic','focus','woman','verve','favor','haste','lemur','anime','haunt','stole','tenet','cacao','grove','ascot','solar','chill','crowd','voter','capon','venom','shock','clerk','slice','chaos','class','kazoo','larva','bowel','value','burst','flunk','bulge','error','water','plant','field','manor','paste','stock','kayak','flume','tiara','stake','regal','shape','visit','clove','lycra','enemy','glass','ideal','derby','tread','silly','slave','strip','patio','shunt','ramie','shell','print','uncle','prize','boxer','blade','creek','tiger','lunch','cross','blank','alley','pulse','motel','obese','wagon','plain','glove','amber','curse','brush','drunk','igloo','thief','board','tract','spell','nylon','flame','onset','fibre','trait','tenth','quilt','scorn','poker','sprag','legal','laugh','shire','grade','curve','thyme','movie','cynic','choir','maker','leave','tepee','drive','putty','kebab','peace','buyer','cycle','worry','rifle','shoot','twine','quail','petal','prune','nymph','feast','elver','whale','timer','taste','fault','viola','relay','saber','alpha','guess','aside','quart','pilot','sugar','canoe','waist','cheer','chick','faith','crisp','camel','caper','adult','world','piece','bench','level','scrap','emery','metal','surge','sleet','click','mouth','gaffe','shift','shark','spark','death','topic','trove','corps','claim','grass','ketch','pecan','reset','stalk','twist','decor','novel','whorl','vault','reply','colon','block','opera','first','sewer','layer','glory','chafe','venti','widow','meter','press','peril','demur','suede','shred','codon','power','denim','giant','habit','polyp','sword','lilac','store','earth','break','lover','shore','ladle','draft','mixer','robot','triad','basin','smile','wrong','guest','cabin','jewel','spelt','adobe','buggy','bosom','grace','scent','wrist','lemon','tribe','synod','dodge','style','omega','hurry','worth','couch','whole','birch','flare','liver','salsa','lipid','twins','usage','frame','laser','essay','wheat','fairy','crazy','delay','pansy','means','flood','realm','raise','facet','flush','maple','herbs','storm','mower','spade','sheet','easel','zebra','fifth','rogue','canon','panty','whelp','knife','month','fruit','trout','craft','idiom','brain','thank','fence','snail','gavel','crush','spine','joint','pinot','quest','stand','trail','fiber','razor','motor','bongo','alien','crown','disco','melon','blood','inlay','ozone','other','hazel','divan','blush','youth','chart','barge','messy','donut','cameo','chard','mouse','spoon','snuck','cocoa','baggy','jiffy','ovary','paper','staff','suite','pearl','steak','bayou','buddy','curry','thumb','elite','gravy','patch','visor','stout','alder','chops','share','punch','mambo','brood','brook','tummy','forum','photo','bloom','green','raven','vinyl','clock','money','dough','ranch','dolor','toque','relic','theme','media','graft','humor','flash','today','grape','nasal','epoch','chair','slash','watch','epoxy','stare','gourd','dryer','exile','lanai','width','grand','queue','thong','mochi','towel','spank','basil','villa','radio','beach','solve','pizza','serve','alibi','eyrie','brass','crane','robin','tabby','fazed','frost','larch','probe','email','otter','yacht','unity','irony','pedal','funky','greed','horde','route','phone','usual','slime','douse','churn','vixen','place','sabre','ferry','modem','house','icing','brace','might','sushi','nudge','chasm','doing','match','taser','boner','music','force','futon','moose','plume','paint','comic','pleat','wedge','verge','knock','yahoo','skill','moody','crave','depth','blind','trial','skean','trunk','sorry','fanny','pride','prior','diner','plier','close','havoc','agent','going','ivory','tense','crepe','conga','agony','wharf','tower','grain','fraud','abuse','curio','entry','cloud','scene','poppy','guava','shelf','coral','bread','juice','right','human','stack','oldie','flock','kitty','wafer','queen','sheep','panda','moron','scope','light','rugby','mecca','noise','onion','start','scalp','climb','doubt','proof','diver','horse','sprat','white','short','genre','armor','roger','pence','frown','start','brand','panel','crumb','wreck','crack','range','goose','sauce','dwell','coach','depot','satin','honor','idiot','leper','freon','cleft','flint','vowel','crude','cover','ethyl','swell','trash','smith','court','scrim','grill','truck','theft','weird','cleat','molly','torso','judge','panic','bacon','young','inbox','blast','chess','metro','tunic','fluke','fiery','chief','radar','saint','broad','grasp','devil','black','shear','flung','vogue','color','dwarf','honey','charm','story','booty','infix','vodka','smolt','molar','devor','index','snake','train','spork','steel','syrup','chalk','dingo','spear','cedar','mound','alloy','truth','nurse','tithe','hotel','final','cadet','price','sense','chive','chino','candy','vista','chime','eagle','koala','octet','child','tonic','clogs','asset','logic','march','bijou','forge','flick','pasta','smoke','daisy','chuck','sport','drink','sloth','recap','chili','drama','tuber','swift','issue','still','check','hovel','usher','finer','slate','tally','squid','porch','stump','floor','grant','serum','mayor','quiet','skunk','drain','llama','lobby','virus','admin','ratio','brown','guilt','pupil','dildo','lingo','wound','crime','bunch','grave','brick','input','carol','skull','gator','chase','glean','dozen','tenor','digit','pitch','congo','mover','rally','shirt','peony','swamp','abbey','quote','leash','video','event','gauge','ramen','jeans','waste','stall','beech','cliff','maybe','sleep','latex','attic','comma','spawn','guard','total','label','thorn','phase','torte','screw','hyena','steam','cheek','acorn','funny','rumor','purse','heron','troop','stamp','brink','burro','labor','album','ponce','being','swine','grief','space','ankle','title','tramp','hutch','rebel','oasis','gorge','party','belly','heavy','crust','spree','haven','catch','beast','crash','basis','madam','dress','anger','spite','arena','pound','spume','straw','rehab','stuff','burly','smock','yeast','shoat','boost','dance','venue','image','forte','scare','clank','spice','actor','stick','socks','north','macro','touch','alarm','brief','donor','cream','globe','parka','stunt','ounce','alert','linen','broom','slump','stage','fight','genie','offer','query','angle','gloom','altar','niche','thump','spray','shade','daddy','irate','swath','clasp','hobby','flair','penny','cloak','audio','beret','study','chest','racer','seize','berry','shoes','bride','split','audit','stain','rainy','smell','fries','tweet','apron','trick','swing','skate','louse','furry','trace','table','toast','penis','freak','rabbi','cable','beard','spasm','slang','polar','shawl','miter','upper','flute','payee','bonus','major','riser','pouch','speed','vomit','sonar','minor','thing','afoul','canal','chain','hello','spout','opium','equal','perch','spike','tooth','treat','later','snack','medal','verse','crate','maize','stink','ruler','clamp','great','scale','nerve','niece','point','login','dirty','badge','dream','mango','heart','aspic','gland','nexus','trope','ridge','telly','local','organ','sweat','cause','queer','apple','score','urban','banjo','eaves','lunge','coast','trade','crook','slide','limit','stone','state','whack','round','bleat','cider','cough','bidet','piety','tulip','frock','wheel','blend','quill','peach','pause','cloth','baker','bagel','hoard','ninja','plane','prose','horst','bulgy','sting','sepal','drake','order','shout','macaw','elbow','pivot','plate','focal','daily','carry','south','graph','spill','pagan','marsh','vitro','brake','aglet','cargo','birth','eater','stair','chord','array','stool','witch','flesh','diary','sound','jumbo','tempo','count','sitar','spool'];
            let field = Array(6).fill().map(() => Array(5).fill(0));
            let word='';
            let letters_tried = [];
            let letters_field = Array(6).fill().map(() => Array(5).fill(null));
            var curdate = new Date();
            var refdate = new Date(2022, 5, 8);
            var mode='daily';
            let diff = (new Date(curdate.getTime() - refdate.getTime())).getUTCDate() - 1;

                function disableField()
                {
                    for (var i = 0; i < 5; i++) {
                        for (var j = 0; j < 5; j++) {
                    document.getElementById(i+'_'+j).disabled = true;
                        }
                    }
                }

                function getEmojis(res)
                {
                    var d= document.createElement("div");
                    d.className=d.className+'result';
                    d.id='emojis';
                    d.style.height="220px";
                    d.style.width="350px";
                    //var p= document.createElement("p");
                    x='';
                    for (var i = 0; i < 5; i++) {
                         for (var j = 0; j < 5; j++) {
                            if (field[i][j] ==0) {x+=String.fromCodePoint(9898);}
                            else if (field[i][j] ==1) {x+=String.fromCodePoint(10060);}
                            else if (field[i][j] ==-1) {x+=String.fromCodePoint(11093);}
                    }
                    x+='\ \n';
                    }
                    x+=res;
                    if (mode == 'daily')
                    {
                    str='I tried #tictactordle No.'+diff+1+' and see how it turned up:\n'+x;
                    }
                    else
                    {
                    str='I tried #tictactordle and see how it turned up:\n'+x;
                    }
                    var tn = document.createTextNode('Here are your results:\n\n'+str+'\n\n');
                    //p.appendChild(tn);

                    var btn = document.createElement("button");
                           //btn.setAttribute("value",i+'_'+j);
                           btn.className = btn.className + "button";
                           btn.textContent='Copy to clipboard';
                           btn.onclick = function() {navigator.clipboard.writeText(str);document.getElementById('emojis').style.display = "none";};
                           

                    d.appendChild(tn);
                    d.appendChild(btn);
                    document.body.appendChild(d);
                }

                function putGuesser()
                {
                    for (var j = 0; j < 5; j++) {
                           var d= document.createElement("div");
                           d.id='cnt'+5+'_'+j;
                           var btn = document.createElement("button");
                           //btn.setAttribute("value",i+'_'+j);
                           btn.className = btn.className + "button built";
                           btn.id=5+'_'+j;
                           
                           d.className = d.className + "cellcnt";
                           d.style.left=btn.style.left=135+j*100;
                           d.style.top=btn.style.top=10+500;
                           //btn.textContent=btn.id;
                           btn.onclick = function() {setState(this.id);};
                           d.appendChild(btn);
                           document.body.appendChild(d);
                        }
                }

                

                function putLetter(letter, sign, _id)
                {
                    _lett=document.createElement("p");
                    _lett.className = _lett.className + "letter";
                    var tn = document.createTextNode(letter);
                    _lett.appendChild(tn);
                    document.getElementById('cnt'+_id).appendChild(_lett);

                    _sym=document.createElement("p");
                    _sym.className = _sym.className + "xo";
                    tn = document.createTextNode(sign.toUpperCase());
                    _sym.appendChild(tn);
                    document.getElementById('cnt'+_id).appendChild(_sym);
                    return;
                }

                function isWin()
                {
                    let lines=Array(12).fill('');
                    for (var i = 0; i < 5; i++) {
                        for (var j = 0; j < 5; j++) {
                            lines[j]+=''+field[i][j]; //rows
                            lines[5+i]+=''+field[i][j]; //cols
                        }
                        lines[10]+=''+field[i][i];
                        lines[11]+=''+field[i][4-i];
                    }
                    
                    if (lines.indexOf('11111') != -1) {return 'x'};
                    if (lines.indexOf('-1-1-1-1-1') != -1) {return 'o'};
                    
                    return null;
                }

                function setWord()
                {
                    num=diff;
                    if (mode != 'daily')
                    {
                        num=Math.floor(Math.random()*init_wordlist.length);
                    }

                    
                    word=init_wordlist[num%init_wordlist.length];
                    
                }
                function setMode()
                {
                    var d= document.createElement("div");
                    d.className=d.className+'result';
                    d.id='mode_div';
                    d.style.height="500px";
                    d.style.width="500px";
                    //var p= document.createElement("p");
                    rules="Description\n\nSo, this is a tic-tac-toe game, but your purpose is not to win the tic-tac-toe (though you need to), but to guess a word. Therefore, computer is rather dumb at tic-tac-toe and may well let you win after five tries. But after that you only have one go at guessing the word, so don't win the first part too fast.\nWhenever it's your turn, you select a cell for your X and you put in a letter. Each row is treated like a try to guess the word in classic Wordle, so you'll get the usual colors. Then, depending on your accuracy, computer will put its O and a letter which is either not present in the word (gray) or probably not present (yellow-gray), if you didn't guess accurately. If you win the tic-tac-toe (make five X in a row, column, or diagonal) or arrive to the tie, you may proceed to guess the word. If you lose, you can restart.";
                    var tn = document.createTextNode(rules+'\n\nSelect playing mode:\n\n');
                    //p.appendChild(tn);

                    var btn = document.createElement("button");
                           //btn.setAttribute("value",i+'_'+j);
                           btn.className = btn.className + "button";
                           btn.textContent='daily';
                           btn.onclick = function() {mode='daily'; document.getElementById('mode_div').style.display = "none";setWord();};
                           
                    var btn2 = document.createElement("button");
                           //btn.setAttribute("value",i+'_'+j);
                           btn2.className = btn.className + "button";
                           btn2.textContent='training';
                           btn2.onclick = function() {mode='training'; document.getElementById('mode_div').style.display = "none";setWord();};
                          

                    d.appendChild(tn);
                    d.appendChild(btn);
                     d.appendChild(btn2);
                    document.body.appendChild(d);
                }
              
                //the array
                function printBtn() {
                    setMode();
                    
                    for (var i = 0; i < 5; i++) {
                        for (var j = 0; j < 5; j++) {
                           var d= document.createElement("div");
                           d.id='cnt'+i+'_'+j;
                           var btn = document.createElement("button");
                           //btn.setAttribute("value",i+'_'+j);
                           btn.className = btn.className + "button built";
                           btn.id=i+'_'+j;
                           
                           d.className = d.className + "cellcnt";
                           d.style.left=btn.style.left=135+j*100;
                           d.style.top=btn.style.top=10+i*100;
                           //btn.textContent=btn.id;
                           btn.onclick = function() {setState(this.id);};
                           d.appendChild(btn);
                           document.body.appendChild(d);
                        }
                    }
                }

                function validate(input, _id){

       let l=input.value[0];
    letters_tried.push(l);
    [i,j]= _id.split('_');
    
    field[i][j]=1;


    letters_field[i][j]=l;
    document.getElementById('inp'+i+'_'+j).type="hidden";
    if (i>4)
    {
        
        _lett=document.createElement("p");
                    _lett.className = _lett.className + "guesser";
                    var tn = document.createTextNode(l.toUpperCase());
                    _lett.appendChild(tn);
                    document.getElementById('cnt'+_id).appendChild(_lett);
                    checkWordle();
        
        return;
    }
    //document.getElementById(i+'_'+j).textContent=l.toUpperCase()+'/x';
    putLetter(l.toUpperCase(), 'x', _id);
              
             cpuStep(_id);
    
    document.getElementById(_id).disabled = true;
}

function getLetter(not_in_word)
{
    untried = letters_alphabet.filter(x => !letters_tried.includes(x) );
    if (not_in_word)
    {
        untried = untried.filter(x => !word.includes(x) );
    }
    return untried[Math.floor(Math.random()*untried.length)];
}


function cpuStep(_id){
isFull=1;
for (var i=0; i<5; i++)
{
    a=field[i].indexOf(0);
    if (a != -1)
    {
        isFull=0;
    }
}

if (isFull==1)
{
    x=isWin();
    disableField();

    
    if (x == 'x')
    {alert('You won the Tic-tac-toe part, guess the word now');putGuesser();}
    else {alert('We have a tie, try guessing the word');putGuesser();}
    return;
    }
[i,j]= _id.split('_');
l=letters_field[i][j];
ind=word.indexOf(l);
let x_ind=-1;
let y_ind=-1;
x=isWin();

if ((ind == j) || (word[j] == l))
{
    document.getElementById(i+'_'+j).style.backgroundColor = "#6aaa64";
    put_l=getLetter(1);
    x_ind=(i+1)%5;
    y_ind=j;
    x_ind=0;
    while ((field[x_ind][y_ind] !=0) && (x_ind <5))
    {
        x_ind+=1;
    }
    if (x_ind >4)
    {
        x_ind=0;
        while (field[x_ind][y_ind] !=0)
        {
          x_ind=Math.floor(Math.random()*5);
          y_ind=Math.floor(Math.random()*5);  
        }
    }
    field[x_ind][y_ind]=-1;
    letters_field[x_ind][y_ind]=put_l;
    letters_tried.push(put_l);
    setTimeout(function(){ 

       
//document.getElementById(x_ind+'_'+y_ind).textContent=put_l.toUpperCase()+'/o';
putLetter(put_l.toUpperCase(), 'o', x_ind+'_'+y_ind);
    document.getElementById(x_ind+'_'+y_ind).style.backgroundColor = "#787c7e"; 
    }, 500);  
    
}
else if (ind != -1)
{
    document.getElementById(i+'_'+j).style.backgroundColor = "#c9b458";
    
    put_l=getLetter(0);
    x_ind=(i+1)%5;
    y_ind=j;
    x_ind=0;
    while ((field[x_ind][y_ind] !=0) && (x_ind <5))
    {
        x_ind+=1;
    }
    if (x_ind == 5)
    {
        x_ind=0;
        while (field[x_ind][y_ind] !=0)
        {
          x_ind=Math.floor(Math.random()*5);
          y_ind=Math.floor(Math.random()*5);  
        }
    }
    field[x_ind][y_ind]=-1;
    letters_field[x_ind][y_ind]=put_l;
    letters_tried.push(put_l);
    setTimeout(function(){ 

       

    //document.getElementById(x_ind+'_'+y_ind).textContent=put_l.toUpperCase()+'/o';
    putLetter(put_l.toUpperCase(), 'o', x_ind+'_'+y_ind);
    document.getElementById(x_ind+'_'+y_ind).style.backgroundImage="linear-gradient(45deg, #c9b458 25%, #787c7e 25%, #787c7e 50%, #c9b458 50%, #c9b458 75%, #787c7e 75%, #787c7e 100%)";

    }, 500);  
}
else
{
    document.getElementById(i+'_'+j).style.backgroundColor = "#787c7e";
    let put_l=getLetter(0);
    x_ind=Math.floor(Math.random()*5);
    y_ind=Math.floor(Math.random()*5);
    while (field[x_ind][y_ind] !=0)
    {
        x_ind=Math.floor(Math.random()*5);
        y_ind=Math.floor(Math.random()*5);
    }
    field[x_ind][y_ind]=-1;
    letters_field[x_ind][y_ind]=put_l;
    letters_tried.push(put_l);
    setTimeout(function(){ 

         

    //document.getElementById(x_ind+'_'+y_ind).textContent=put_l.toUpperCase()+'/o';
    putLetter(put_l.toUpperCase(), 'o', x_ind+'_'+y_ind);
    document.getElementById(x_ind+'_'+y_ind).style.backgroundImage="linear-gradient(45deg, #c9b458 25%, #787c7e 25%, #787c7e 50%, #c9b458 50%, #c9b458 75%, #787c7e 75%, #787c7e 100%)";
    }, 500); 
    c
}
document.getElementById(x_ind+'_'+y_ind).disabled = true;
x=isWin();
if (x == 'o')
{
    disableField();
    alert('You lost, refresh page to play again');
   
}
if (x == 'x')
{
    disableField();
    setTimeout(function(){ 
    alert('You won the Tic-tac-toe part, guess the word now');
    putGuesser();
    }, 500);  
    
}
}
                function setState(_id)
            {
                var _in = document.createElement('input');
                _in.id='inp'+_id;
                _in.type="text";
                _in.maxLength="1";
                _in.onkeyup = function() {validate(this, _id);};
                _in.size="1";

                document.getElementById('cnt'+_id).appendChild(_in);
              [i,j]= _id.split('_');
              
              

              
            }

function checkWordle()
                {
                    res='';
                    for (var j = 0; j < 5; j++) {
                        console.log(letters_field);
                        if (letters_field[5][j] === null) 
                            { return;}
                    }
                    console.log('Word is ready');
                    check_word='';
                    for (var j = 0; j < 5; j++) {
                        check_letter=letters_field[5][j];
                        check_word+=check_letter;
                        if (check_letter == word[j])
                        {
                            document.getElementById(5+'_'+j).style.backgroundColor = "#6aaa64";
                            res+=String.fromCodePoint(129001);
                        }
                        else if (word.includes(check_letter))
                        {
                            document.getElementById(5+'_'+j).style.backgroundColor = "#c9b458";
                            res+=String.fromCodePoint(129000);
                        }
                        else
                        {
                            document.getElementById(5+'_'+j).style.backgroundColor = "#787c7e";
                            res+=String.fromCodePoint(11036);
                        }


                    }

                    setTimeout(function(){ 


          if (check_word == word)
                    {
                        alert('You won!');
                    }
                    else
                    {
                        alert('Oops, word was '+word);
                    }
                    getEmojis(res);

                     }, 500);  
             

                }
              
           
    </script>
</html>